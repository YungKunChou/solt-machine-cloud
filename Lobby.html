<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>建立新遊戲 - 拉霸機</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #2c3e50; }
        .container { text-align: center; }
        h1 { color: white; }
        #create-room-btn {
            font-size: 24px; padding: 20px 40px; cursor: pointer; border-radius: 10px; border: none;
            background-color: #e67e22; color: white; font-weight: bold;
        }
        #create-room-btn:disabled { background-color: #95a5a6; cursor: not-allowed; }
    </style>
</head>
<body>
    <div class="container">
        <h1>拉霸雙渦輪抽獎機</h1>
        <button id="create-room-btn">建立一個新的遊戲房間</button>
    </div>

    <script>
        const createBtn = document.getElementById('create-room-btn');
        // ↓↓↓ 請務必換成您部署後的後端伺服器網址 ↓↓↓
        const backendUrl = 'https://solt-machine.onrender.com';

        createBtn.addEventListener('click', () => {
            createBtn.disabled = true;
            createBtn.textContent = '建立中...';

            fetch(backendUrl + '/create-room', { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // 成功後，跳轉到您的遊戲頁面(index.html)，並附上房間ID
                        window.location.href = `index.html?room=${data.roomId}`;
                    } else {
                        alert('建立房間失敗！請稍後再試。');
                        createBtn.disabled = false;
                        createBtn.textContent = '建立一個新的遊戲房間';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('無法連接到伺服器！');
                    createBtn.disabled = false;
                    createBtn.textContent = '建立一個新的遊戲房間';
                });
        });
    </script>
</body>
</html>